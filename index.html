<!DOCTYPE html>
<html>
    <head>
        <title>Revu</title>
        <script>
            let endpoint = "https://f4do7hzoab.execute-api.sa-east-1.amazonaws.com/default/ec-management"

            let timeout;

            function start() {
                console.log("Starting");
                exec("Start");

                if (timeout) clearTimeout(timeout);
                interval = setTimeout(function() {
                    iframe.src = iframe.src;
                    iframe.classList.remove("hidden");
                }, 10000);
            }

            function stop() {
                console.log("Stopping");
                exec("Stop");
                clearInterval(interval);
            }
            function exec(command) {
                fetch(endpoint, {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify(command),
                })
                .then(response => response.text())
                .then(response => console.log(response));
            }
        </script>
        <style>
            * {
                margin: 0
            }
            .class hidden {
                visibility: hidden
            }
            iframe {
                width: 100vw;
                height: 100vh;
            }
            body {
                background-color: black;
            }
        </style>
    </head>
    <body onload="start()" onunload="stop()">
        <iframe id="iframe" class="hidden" src="https://ps.revu.design" frameBorder="0"></iframe>
    </body>
</html>